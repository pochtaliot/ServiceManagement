@page "/"
@inherits ComponentClasses.HomeComponent
@rendermode InteractiveServer
@using Microsoft.Web.Administration
@using ServiceManagement.Components.Pages.Partials.AppPools
@using ServiceManagement.Components.Pages.Partials.Services

<h3 class="text-primary">Service and IIS Manager</h3>

<div class="spinner-border @(PreloadService.WaitingForInitialStatusesRead ? "" : "d-none")" role="status">
    <span class="sr-only"></span>
</div>

@foreach (var server in Config.Value.Servers)
{
    <div class="card my-3">
        <div class="card-header d-flex align-items-center justify-content-between">
            <h4 class="card-title">@server.Alias (@server.Name)</h4>
            @* <i class="bi bi-arrow-clockwise icon-button-md"></i> *@
        </div>
        <div class="card-body">
            @if (server.Services.Any())
            {
                <ServiceComponent Server="@server"></ServiceComponent>
            }
            @if (server.AppPools.Any())
            {
                <AppPoolComponent Server="@server"></AppPoolComponent>
            }
        </div>
    </div>
}

@code {
}
